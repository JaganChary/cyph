<mat-progress-spinner mode='indeterminate' *ngIf='pending'></mat-progress-spinner>
<form ngNativeValidate (submit)='submit()'>
	<div fxLayout='column' fxLayoutGap='16px' *ngIf='!complete'>
		<div fxLayout='column' fxLayoutGap='16px' class='checkout-ui'>
			<h2 *ngIf='itemName'>
				<span>{{itemName}}</span>
				&ngsp;
				<span cyphTranslate>SUBSCRIPTION</span>
			</h2>
			<div *ngIf='!apiKey'>
				<div fxLayout='column' fxLayout.gt-md='row' fxLayoutGap='16px'>
					<mat-form-field fxFlex>
						<input
							matInput
							cyphTranslate
							[(ngModel)]='name'
							name='name'
							placeholder='Name'
							required
						/>
					</mat-form-field>
					<mat-form-field fxFlex>
						<input
							matInput
							cyphTranslate
							[(ngModel)]='email'
							name='email'
							type='email'
							[pattern]='emailPattern'
							placeholder='Email'
							required
						/>
					</mat-form-field>
				</div>
			</div>
			<div *ngIf='!apiKey'>
				<mat-form-field fxFlex>
					<input
						matInput
						cyphTranslate
						[(ngModel)]='company'
						name='company'
						[placeholder]='itemName?.includes("BUSINESS") ?
							"Company" :
							"Company (optional)"
						'
						[required]='itemName?.includes("BUSINESS")'
					/>
				</mat-form-field>
			</div>
			<div [id]='containerID' class='braintree'></div>
		</div>
		<div fxLayoutAlign='center center'>
			<button mat-raised-button type='submit'>
				<span cyphTranslate>Confirm</span>
				&ngsp;
				<span>${{amount}}</span>
				&ngsp;
				<span>
					<span *ngIf='subscriptionType === undefined' cyphTranslate>payment</span>
					<span *ngIf='subscriptionType === subscriptionTypes.annual' cyphTranslate>
						annual subscription
					</span>
					<span *ngIf='subscriptionType === subscriptionTypes.monthly' cyphTranslate>
						monthly subscription
					</span>
				</span>
			</button>
		</div>
	</div>
	<div class='confirmation' *ngIf='complete'>
		<ng-content *ngIf='success'></ng-content>
		<div *ngIf='!success'>
			<span cyphTranslate>Payment failed.</span>
			&ngsp;
			<span class='retry' (click)='ngAfterViewInit()' cyphTranslate>Click here</span>
			&ngsp;
			<span cyphTranslate>to try again.</span>
		</div>
	</div>
</form>
