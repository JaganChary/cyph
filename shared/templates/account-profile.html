<div fxFlexFill [class.editing]='isEditorFocused'>
	<div fxFlexFill fxLayout='row'>
		<div
			fxFlex
			fxFlexFill
			fxLayout='column'
			class='profile'
			*ngIf='user'
			[class.mobile]='envService.isMobile'
		>
			<div fxLayout='column' class='header' fxLayoutAlign='center center'>
					<div fxFlex fxLayout='row' class='user-info' fxLayoutAlign='center center'>
						<img
							class='avatar animated jackInTheBox _1'
							[ngClass]='userPresence[user.status | async]'
							alt='Profile Picture'
							[src]='user.avatar | async'
						/>
						<div fxLayout='column'>
							<div class='name animated flipInX _2' *ngIf='(user.userType | async) === accountUserType.Standard'>{{user.name | async}}</div>
							<div class='username animated flipInX _2' *ngIf='(user.userType | async) === accountUserType.Standard'>@{{user.username | async}}</div>
							<div class='name animated flipInX _2' *ngIf='(user.userType | async) === accountUserType.TelehealthPatient'>Patient: {{user.name | async}}</div>
							<div class='name animated flipInX _2' *ngIf='(user.userType | async) === accountUserType.TelehealthDoctor'>Dr. {{user.name | async}}</div>
						</div>
					</div>
				</div>

			<div fxLayoutAlign='center center' class='edit-hide status' *ngIf='isCurrentUser && !accountService.isTelehealth'>
				<mat-select
					fxFlex='50'
					cyphTranslate
					[ngModel]='user.status | async'
					(ngModelChange)='user.accountUserPresence.setValue({status: $event})'
					name='status'
					placeholder='Status'
				>
					<mat-option *ngFor='let status of statuses' [value]='status.value'>
						{{status.text}}
					</mat-option>
				</mat-select>
			</div>

			<div
				class='buttons'
				fxLayout='row'
				fxLayoutAlign='center center'
				fxLayoutGap='16px'
				*ngIf='!isCurrentUser && (user.userType | async) === accountUserType.Standard'
			>
				<button
					mat-mini-fab
					cyphTranslate
					class='animated flipInX _4'
					matTooltip='Remove Contact'
					(click)='accountContactsService.removeContact(user.username)'
					*ngIf='isContact | async; else addContact'
				>
					<mat-icon>delete</mat-icon>
				</button>
				<ng-template #addContact>
					<button
						mat-mini-fab
						cyphTranslate
						class='animated flipInX _4'
						matTooltip='Add Contact'
						(click)='accountContactsService.addContact(user.username)'
					>
						<mat-icon>person_add</mat-icon>
					</button>
				</ng-template>

				<button
					mat-mini-fab
					cyphTranslate
					class='animated shrink pulldown flipInX _4'
					matTooltip='Open Chat'
					[routerLink]='"/account/chat/" + user.username'
				>
					<mat-icon>chat_bubble</mat-icon>
				</button>
			</div>

			<div fxLayout='row' fxLayoutAlign='center center' *ngIf='!isCurrentUser && (user.userType | async) === accountUserType.Standard'>
				<div
					class='file-upload'
					fxFlex='25'
					fxLayoutAlign='center'
					matTooltip='Share File'
					matTooltipPosition='above'
					cyphDropZone
					cyphTranslate
					(fileDrop)='accountFilesService.upload($event.name, $event, user.username)'
				>
					<mat-icon>file_upload</mat-icon>
				</div>
			</div>
		</div>
	</div>

	<div fxLayout='row' fxLayoutGap='16px' class='edit-buttons edit-hide' *ngIf='isCurrentUser'>
		<button
			mat-fab
			cyphTranslate
			class='alt'
			matTooltip='Close'
			matTooltipPosition='above'
			(click)='editMode = false'
			*ngIf='editMode'
		>
			<mat-icon>close</mat-icon>
		</button>
		<button
			mat-fab
			cyphTranslate
			[matTooltip]='editMode ? "Save" : "Edit"'
			matTooltipPosition='above'
			(click)='editMode ? saveUserDescription() : editMode = true'
		>
			<mat-icon *ngIf='editMode'>save</mat-icon>
			<mat-icon *ngIf='!editMode'>edit</mat-icon>
		</button>
	</div>
</div>
