<div fxFlexFill fxLayout='row'>
	<div
		fxFlex
		fxFlexFill
		fxLayout='column'
		fxLayoutAlign='center stretch'
		class='profile'
		*ngIf='user'
		[class.mobile]='envService.isMobile'
	>
		<div fxLayoutAlign='center center'>
			<div>
				<img
					class='avatar animated jackInTheBox _1'
					[ngClass]='userPresence[user.status | async]'
					alt='Profile Picture'
					[src]='user.avatar | async'
				/>
				<div class='name animated flipInX _2'>{{user.name | async}}</div>
				<div class='username animated flipInX _2'>@{{user.realUsername | async}}</div>
				<div class='description animated flipInX _3'
					*ngIf='!editMode'
				>
					{{user.description | async}}
				</div>
				<md-input-container *ngIf='editMode && user'>
					<input
						mdInput
						*ngIf='user.description'
						[ngModel]='user.description | async'
						(ngModelChange)='descriptionDraft = $event'
					/>
				</md-input-container>
			</div>
		</div>

		<div fxLayoutAlign='center center' class='status' *ngIf='isCurrentUser'>
			<md-select
				fxFlex='50'
				cyphTranslate
				[ngModel]='user.status | async'
				(ngModelChange)='user.accountUserPresence.setValue({status: $event})'
				name='status'
				placeholder='Status'
			>
				<md-option *ngFor='let status of statuses' [value]='status.value'>
					{{status.text}}
				</md-option>
			</md-select>
		</div>

		<div fxLayout='row' fxLayoutGap='16px' class='buttons' *ngIf='!isCurrentUser'>
			<div fxFlex></div>

			<button
				md-mini-fab
				cyphTranslate
				class='animated flipInX _4'
				mdTooltip='Add User'
			>
				<md-icon>person_add</md-icon>
			</button>

			<button
				md-mini-fab
				cyphTranslate
				class='animated shrink pulldown flipInX _4'
				mdTooltip='Open Chat'
				[routerLink]='"/account/chat/" + user.username'
			>
				<md-icon>chat_bubble</md-icon>
			</button>

			<div fxFlex></div>
		</div>
	</div>
</div>
<button
	md-fab
	*ngIf='!editMode'
	(click)='edit(true)'
>
	<md-icon >edit</md-icon>
</button>
<button
	md-fab
	*ngIf='editMode'
	(click)='saveUserDescription()'
>
	<md-icon>save</md-icon>
</button>
